<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Coverflow Team Gallery</title>
      <!-- Script Add -->
  <script src="./main.js"></script>
  
    <style>
        :root {
            /* Tunable sizing tokens */
            --center-w-min: 260px;
            --center-w-max: 680px;
            --slat-w-min: 50px;
            --slat-w-max: 96px;
            --gap-min: 10px;
            --gap-max: 28px;
            --radius: 16px;
            --shadow: 0 15px 35px rgba(0, 0, 0, .25), 0 5px 15px rgba(0, 0, 0, .15);
            --text: #0b0b0b;
            --text-on-dark: #fff;
            --bg: linear-gradient(180deg, #e6f0f6 0%, #f7f5f3 100%);
        }

        * {
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            color: var(--text);
            background: var(--bg);
            overflow-x: hidden;
        }

        .wrap {
            min-height: 100svh;
            display: grid;
            place-items: center;
            padding: clamp(16px, 3vw, 36px);
        }

        .gallery {
            width: min(1200px, 96vw);
            height: clamp(320px, 58vh, 520px);
            position: relative;
            perspective: 1400px;
            --centerW: 560px;
            /* JS updates these on resize for perfect spacing */
            --slatW: 80px;
            --gap: 20px;
            --cardH: 100%;
        }

        .track {
            /* absolute center anchor so children can translate from here */
            position: absolute;
            inset: 0;
            transform-style: preserve-3d;
        }

        .card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: var(--centerW);
            height: 450px;
            overflow: hidden;
            background: #111;
            box-shadow: var(--shadow);
            transform-style: preserve-3d;
            transition: transform 520ms cubic-bezier(.2, .7, 0, 1), width 320ms, height 320ms, opacity 320ms, filter 320ms;
            will-change: transform, width, height, opacity, filter;
            cursor: pointer;
            user-select: none;
        }

        .card img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            filter: saturate(1.06) contrast(1.06);
        }

        .card::after {
            /* subtle vignette for readability */
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0, 0, 0, .0) 40%, rgba(0, 0, 0, .55) 100%);
            opacity: var(--vignette, 1);
            transition: opacity 320ms ease;
            pointer-events: none;
        }

        .meta {
            position: absolute;
            left: 16px;
            bottom: 14px;
            right: 16px;
            color: var(--text-on-dark);
        }

        .name {
            font-weight: 700;
            letter-spacing: .4px;
        }

        .role {
            opacity: .9;
            font-size: .92rem;
        }

        /* Vertical label for side slats */
        .label {
            position: absolute;
            inset: 0;
            display: grid;
            place-items: center;
            color: #ffffff;
            font-weight: 800;
            letter-spacing: .5ch;
            text-transform: uppercase;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            mix-blend-mode: normal;
            padding: 8px 0;
            opacity: 0;
            /* hidden on center by default; shown on slats */
            transition: opacity 260ms ease;
        }

        .tint {
            /* color overlay for slats */
            position: absolute;
            inset: 0;
            background: var(--tint, transparent);
            opacity: .75;
            mix-blend-mode: multiply;
            transition: opacity 240ms ease;
        }

        /* Navigation buttons */
        .nav {
            position: absolute;
            z-index: 50;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 999px;
            border: none;
            background: rgba(255, 255, 255, .9);
            box-shadow: 0 6px 18px rgba(0, 0, 0, .18);
            display: grid;
            place-items: center;
            cursor: pointer;
        }

        .nav:active {
            transform: translateY(-50%) scale(.98);
        }

        .nav svg {
            width: 18px;
            height: 18px;
        }

        .prev {
            left: 6px;
        }

        .next {
            right: 6px;
        }

        /* State classes populated by JS */
        .card.slat {
            width: var(--slatW);
        }

        .card.slat .meta {
            display: none;
        }

        .card.slat .label {
            opacity: 1;
        }

        .card.slat::after {
            --vignette: .15;
        }

        /* Responsive tweaks */
        @media (max-width: 920px) {
            .gallery {
                height: clamp(360px, 60vh, 540px);
            }
        }

        @media (max-width: 720px) {
            .nav {
                width: 36px;
                height: 36px;
            }

            .label {
                letter-spacing: .35ch;
                font-size: .92rem;
            }
        }

        @media (max-width: 520px) {
            .gallery {
                height: clamp(360px, 62vh, 560px);
            }

            .label {
                letter-spacing: .28ch;
                font-size: .86rem;
            }
        }
    </style>
</head>

<body>
    <main class="wrap">
        <section class="gallery" id="gallery" aria-roledescription="carousel" aria-label="Team gallery">
            <button class="nav prev" aria-label="Previous">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M15 6l-6 6 6 6" stroke="#111" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
            <div class="track" id="track" role="list"></div>
            <button class="nav next" aria-label="Next">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M9 18l6-6-6-6" stroke="#111" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </section>
    </main>

    <script>
        // ---- Data (replace with your own) ----
        const people = [
            {
                name: 'Kaity',
                role: 'Fashion Director',
                tint: 'linear-gradient(180deg,#0047ff55,#9c27b055)',
                img: 'https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=1400&auto=format&fit=crop'
            },
            {
                name: 'Mike',
                role: 'Art Lead',
                tint: 'linear-gradient(180deg,#00000066,#00000022)',
                img: 'https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?q=80&w=1400&auto=format&fit=crop'
            },
            {
                name: 'Samite',
                role: 'Photographer',
                tint: 'linear-gradient(180deg,#00968855,#4caf5055)',
                img: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1400&auto=format&fit=crop'
            },
            {
                name: 'Oakes',
                role: 'Producer',
                tint: 'linear-gradient(180deg,#ff572255,#ff980055)',
                img: 'https://images.unsplash.com/photo-1531123897727-8f129e1688ce?q=80&w=1400&auto=format&fit=crop'
            },
            {
                name: 'Lauren',
                role: 'Stylist',
                tint: 'linear-gradient(180deg,#3f51b555,#00bcd455)',
                img: 'https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=1400&auto=format&fit=crop'
            },
            {
                name: 'Ryan',
                role: 'Editor',
                tint: 'linear-gradient(180deg,#673ab755,#2196f355)',
                img: 'https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?q=80&w=1400&auto=format&fit=crop'
            }
        ];

        // ---- DOM ----
        const gallery = document.getElementById('gallery');
        const track = document.getElementById('track');
        const prevBtn = gallery.querySelector('.prev');
        const nextBtn = gallery.querySelector('.next');

        // Build cards
        people.forEach((p, i) => {
            const card = document.createElement('figure');
            card.className = 'card';
            card.setAttribute('role', 'listitem');
            card.dataset.index = i;
            card.style.setProperty('--tint', p.tint);

            const img = document.createElement('img');
            img.alt = `${p.name} portrait`;
            img.loading = 'lazy';
            img.src = p.img;

            const tint = document.createElement('span');
            tint.className = 'tint';

            const label = document.createElement('figcaption');
            label.className = 'label';
            label.textContent = p.name;

            const meta = document.createElement('div');
            meta.className = 'meta';
            meta.innerHTML = `<div class="name">${p.name}</div><div class="role">${p.role}</div>`;

            card.append(img, tint, label, meta);
            track.append(card);
        });

        let active = 0;

        // Compute responsive sizing based on viewport
        function computeSizes() {
            const w = gallery.clientWidth;
            const centerW = Math.max(parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--center-w-min') || 260), Math.min(w * 0.56, parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--center-w-max') || 680)));
            const slatW = Math.max(parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--slat-w-min') || 50), Math.min(w * 0.08, parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--slat-w-max') || 96)));
            const gap = Math.max(parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--gap-min') || 10), Math.min(w * 0.025, parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--gap-max') || 28)));

            gallery.style.setProperty('--centerW', centerW + 'px');
            gallery.style.setProperty('--slatW', slatW + 'px');
            gallery.style.setProperty('--gap', gap + 'px');
        }

        function mod(n, m) { return ((n % m) + m) % m; }

        function layout() {
            const N = people.length;
            const centerW = parseFloat(getComputedStyle(gallery).getPropertyValue('--centerW'));
            const slatW = parseFloat(getComputedStyle(gallery).getPropertyValue('--slatW'));
            const gap = parseFloat(getComputedStyle(gallery).getPropertyValue('--gap'));

            const side1 = centerW / 2 + gap + slatW / 2; // distance to first slat either side
            const step = slatW + gap;               // spacing between successive slats

            track.querySelectorAll('.card').forEach((card, i) => {
                // Shortest signed distance around the circular list
                const raw = i - active;
                const alt = raw > 0 ? raw - people.length : raw + people.length;
                const d = Math.abs(raw) <= Math.abs(alt) ? raw : alt; // choose shorter wrap

                const abs = Math.abs(d);
                const dir = Math.sign(d); // -1 left, +1 right, 0 center

                if (d === 0) {
                    card.classList.remove('slat');
                    card.style.zIndex = 100;
                    card.style.opacity = 1;
                    card.style.filter = 'none';
                    card.style.transform = `translate3d(calc(-50% + 0px),-50%,0) rotateY(0deg)`;
                    return;
                }

                // Position slats up to 3 on either side; hide the rest on small screens
                const depth = Math.min(abs, 4); // clamp visualized distance
                const shiftX = (side1 + (depth - 1) * step) * dir;
                const rot = -18 * dir; // give a slight 3D tilt
                const scale = 1 - Math.min(0.07 * depth, 0.35);
                const opacity = depth > 3 ? 0 : 1; // fade extra far items

                card.classList.add('slat');
                card.style.zIndex = String(100 - depth);
                card.style.opacity = opacity;
                card.style.filter = 'grayscale(.15) brightness(.96)';
                card.style.transform = `translate3d(calc(-50% + ${shiftX}px), -50%, ${-depth * 40}px) rotateY(${rot}deg) scale(${scale})`;
            });

            // Update focusability
            track.querySelectorAll('.card').forEach((c, i) => {
                c.tabIndex = i === active ? 0 : -1;
                c.setAttribute('aria-hidden', i === active ? 'false' : 'true');
            });
        }

        function go(n) {
            active = mod(n, people.length);
            layout();
        }

        // Click to focus
        track.addEventListener('click', (e) => {
            const card = e.target.closest('.card');
            if (!card) return;
            go(Number(card.dataset.index));
        });

        // Buttons
        prevBtn.addEventListener('click', () => go(active - 1));
        nextBtn.addEventListener('click', () => go(active + 1));

        // Keyboard
        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') go(active - 1);
            if (e.key === 'ArrowRight') go(active + 1);
        });

        // Drag / swipe
        let startX = 0, dragging = false;
        function onPointerDown(e) { dragging = true; startX = e.clientX || e.touches?.[0]?.clientX || 0; }
        function onPointerMove(e) { if (!dragging) return; }
        function onPointerUp(e) {
            if (!dragging) return; dragging = false;
            const x = e.clientX || e.changedTouches?.[0]?.clientX || 0;
            const dx = x - startX;
            if (Math.abs(dx) > 40) dx < 0 ? go(active + 1) : go(active - 1);
        }
        track.addEventListener('pointerdown', onPointerDown);
        window.addEventListener('pointerup', onPointerUp);
        track.addEventListener('touchstart', onPointerDown, { passive: true });
        track.addEventListener('touchend', onPointerUp);

        // Resize handling
        const ro = new ResizeObserver(() => { computeSizes(); layout(); });
        ro.observe(gallery);

        // Initial paint
        computeSizes();
        layout();
    </script>

</body>

</html>